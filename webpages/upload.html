<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=0">
    <title>Upload</title>
    <link href="../css/reset.css" rel="stylesheet" type="text/css">
    <link href="../css/header.css" rel="stylesheet" type="text/css">
    <link href="../css/upload.css" rel="stylesheet" type="text/css">
</head>
<body>
<nav >
    <img src="../images/logo4.jpg" wide="60" height="50" class="logo">
    <div class="nav-left">
        <table>
            <tr>
                <td><a href="Home.html">Home</a></td>
                <td><a href="Browser.html">Browser</a></td>
                <td><a href="Search.html">Search</a></td>
            </tr>
        </table>
    </div>
    <div class="dropdown">
        <button class="account">My account</button>
        <div class="dropdown-content">
            <a href="upload.html">Upload</a>
            <a href="my_photo.html">My photo</a>
            <a href="favor.html">My favor</a>
            <a href="../index.html">Login in</a>
        </div>
    </div>
</nav>
<section>
    <form action="my_photo.html" name="form2">
        <div class="upload">
            <div class="img-div">
                <img src="#" alt="图片未上传" id="upload-photo" >
            </div>
            <div class="warp">
                <button class="upload-button">Upload</button>
                <input type="file" id="file" required>
            </div>
        </div>
        <script type="text/javascript">
            var file = document.getElementById('file');
            var image = document.getElementById('upload-photo');
            file.onchange = function() {
                var fileData = this.files[0];//获取到一个FileList对象中的第一个文件( File 对象),是我们上传的文件
                var pettern = /^image/;

                console.info(fileData.type);

                if (!pettern.test(fileData.type)) {
                    alert("图片格式不正确");
                    return;
                }
                var reader = new FileReader();
                reader.readAsDataURL(fileData);//异步读取文件内容，结果用data:url的字符串形式表示
                /*当读取操作成功完成时调用*/
                reader.onload = function(e) {
                    console.log(e); //查看对象
                    console.log(this.result);//要的数据 这里的this指向FileReader（）对象的实例reader
                    image.setAttribute("src", this.result);
                    image.setAttribute("opacity", 1);
                }
            }
        </script>
        <div>
            图片标题:<br>
            <input type="text" name="photo-title" class="photo-title" required>
        </div>
        <div>
            图片描述:<br>
            <input type="text" name="photo-description" class="photo-description" required>
        </div>
        <div>
            拍摄国家:<br>
            <input type="text" name="photo-country" class="photo-country" required>
        </div>
        <div>
            拍摄城市:<br>
            <input type="text" name="photo-city" class="photo-city" required>
        </div>
        <input type="submit" name="submit" class="submit" value="Submit">
    </form>
</section>
<footer>
    Copyright © 2019-2021 Web fundamental. All Rights Reserved. 备案号：19302010084
</footer>
</body>
</html>